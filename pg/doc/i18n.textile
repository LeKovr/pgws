h1. Интернационализация

{{toc}}

В проекте реализована возможность предоставлять пользователю информацию (интерфейс и результаты вызова методов API) на нескольких языках.
Далее описано, каким образом это достигается.



h2. Определение языка

Если в параметрах запроса присутствует аргумент lang и его значение входит в число допустимых, фронтенд использует это значение как

# язык для сообщений шаблонов
# аргумент вызова всех методов API

В качестве значения по умолчанию может быть использовано значение из

# атрибутов сессии пользователя
# поля HTTP_ACCEPT_LANGUAGE из заголовка запроса

h2. Шаблоны

Поддержка нескольких языков в шаблонах реализована с использованием библиотеки Locale::Maketext.

Все текстовые сообщения в шаблонах, которые выводятся пользователю, задаются через вызов функции l() (см [[Htmlguide#l-Трансляция-строки]])

Для извлечения подлежащих переводу строк (первично и при обновлении) используется утилита xgettext.pl из пакета Locale::Maketext::Lexicon 

<pre>
# Пример формирования файла английского перевода для шаблонов из каталога tmpl
xgettext.pl -P tt2 -w -D tmpl -d en -o i18n/PWL/en.po
</pre>

Файлы формата .po переводятся стандартными средствами (например, "poedit":http://www.poedit.net/) и сохраняются в каталоге i18n/PWL/

h2. Справочники и методы БД
